.. vim:set expandtab ff=unix ft=rest :

..  Vimwiki : Vimベースの個人用Wiki環境 #2 Vimwikiの操作

..  このページでは、Vimwikiの操作方法、主にVimwikiで用意されているコマンドについて説明します。
    「Vimwiki : Vimベースの個人用Wiki環境 #1 インストールから基本的な使い方まで」の続きとなる記事です。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen|    unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

Vimwiki : Personal Wiki for Vim |BR|
http://www.vim.org/scripts/script.php?script_id=2226

このページでは、Vimwikiの操作方法、主にVimwikiで用意されているコマンドについて説明します。 |BR|
「 `Vimwiki : Vimベースの個人用Wiki環境 #1 インストールから基本的な使い方まで`_ 」の続きとなる記事です。



================================================================================
グローバル
================================================================================

最初に、グローバルな範囲で利用可能な操作を紹介します。 |BR|
この章で紹介する操作は後に紹介するローカル範囲の操作と異なり、どのファイル上からでも利用可能です。

マッピング（グローバル）
--------------------------------------------------------------------------------

下の表が用意されているマッピングです。
ノーマルモードで、下表の操作を実行すると、説明にある操作が行われます。 |BR|
「<Leader>」は特に設定を変更していないのであれば、「\\」と読み替えてください。

.. csv-table::
    :header: 操作, 説明

    "<Leader>ww", Vimwikiのメインページを開く。
    "<Leader>wt", Vimwikiのメインページを新しいタブで開く。
    "<Leader>ws", 複数のWikiの中から開くWikiを選択する。

.. note::

    Vimwikiでは同時に複数のWikiを管理できます。
    Wikiが複数ある際に、どのWikiを開くか選択するコマンドが「\\ws」です。

    .. parsed-literal::
        :class: console

        \\ws

    .. image:: /dist/img/vim/vimwiki_select_wiki.png
        :alt:  Wiki選択

    参考：
    `Vimwiki : Vimベースの個人用Wiki環境 #4 設定・カスタマイズ`_


コマンド（グローバル）
-------------------------------------------------------------------------------- 

マッピングに対応するコマンドが用意されています。 |BR|
これらコマンドも、どこからでも利用可能です。

.. csv-table::
    :header: 操作, 説明

    ":VimwikiGoHome",    Vimwikiのメインページを開く。
    ":VimwikiTabGoHome", Vimwikiのメインページを新しいタブで開く。
    ":VimwikiUISelect",  複数のWikiの中から開くWikiを選択する。



================================================================================
Wikiページローカル
================================================================================

次に、Wikiページ上で利用可能な操作を紹介します。

マッピング（Wikiページローカル）
--------------------------------------------------------------------------------

ノーマルモードで、「操作」の欄にあるキーを入力すると、 |BR|
表の説明にある処理が実行されます。

.. csv-table::
    :header: 操作, カーソル位置, 説明

    "<CR>",        Wikiワード上,               カーソル下のWikiワード用のWikiページに遷移する。
    "<S-CR>",      Wikiワード上,               上下にウィンドウを分割して、カーソル下のWikiワード用のWikiページに遷移する。
    "<C-CR>",      Wikiワード上,               左右にウィンドウを分割して、カーソル下のWikiワード用のWikiページに遷移する。
    "<Backspace>", どこでも可,                 遷移元のWikiページに移動する。
    "<Tab>",       どこでも可,                 Wikiページ上の、後方のWikiワードを検索し、移動する。 TODO
    "<S-Tab>",     どこでも可,                 Wikiページ上の、前方のWikiワードを検索し、移動する。
    "<Leader>wd",  削除対象のWikiページ上,     カレントのWikiページを削除します。
    "<Leader>wr",  リネーム対象のWikiページ上, カレントのWikiページを別の名前に変更します。
    "<C-Space>",   リストの項目上,             リスト項目をTODO項目にする。TODOリストのチェックをON／OFFする。


コマンド（Wikiページローカル）
--------------------------------------------------------------------------------

Wikiページローカルのコマンドにも、やはり、
マッピングに対応するコマンドが用意されています。

.. csv-table::
    :header: 操作, カーソル位置, 説明

    ":VimwikiFollowWord",     Wikiワード上,               カーソル下のWikiワード用のWikiページに遷移する。
    ":VimwikiSplitWord",      Wikiワード上,               上下にウィンドウを分割して、カーソル下のWikiワード用のWikiページに遷移する。
    ":VimwikiVSplitWord",     Wikiワード上,               左右にウィンドウを分割して、カーソル下のWikiワード用のWikiページに遷移する。
    ":VimwikiGoBackWord",     どこでも可,                 遷移元のWikiページに移動する。
    ":VimwikiNextWord",       どこでも可,                 Wikiページ上の、後方のWikiワードを検索し、移動する。
    ":VimwikiPrevWord",       どこでも可,                 Wikiページ上の、前方のWikiワードを検索し、移動する。
    ":VimwikiDeleteWord",     削除対象のWikiページ上,     カレントのWikiページを削除します。
    ":VimwikiRenameWord",     リネーム対象のWikiページ上, カレントのWikiページを別の名前に変更します。
    ":VimwikiToggleListItem", リストの項目上,             リスト項目をTODO項目にする。TODOリストのチェックをON／OFFする。



================================================================================
見出しの大きさのコントロール
================================================================================

見出しの上で「=」「-」を押下すると、見出しのレベルを増減できます。

.. csv-table::
    :header: 操作, カーソル位置, 説明

    "\=", 見出し, 見出しのレベルを1段下げる（「=」を追加する）。見出しでないテキストを見出しにする。
    "\-", 見出し, 見出しのレベルを1段上げる（「=」を減らす）。

「=」を見出しでないテキストの上で押下すると、行の前後に「=」を付与し、その行を見出しにできます。 |BR|
レベル1の見出しの上で「-」を押下すると、その行の前後から「=」を取り除き、通常のテキストに戻せます。



================================================================================
フォールディング・アウトラインの制御
================================================================================

「zm」「zr」で、折りたたみの深さをコントロールできます。 |BR|
「zm」で折りたたみを深くし、「zr」で折りたたみを浅くします。

.. csv-table::
    :header: 操作, 説明

    "zm", 折りたたみを深くする。
    "zr", 折りたたみを浅くする。

フォールディングされるのは、
見出しのレベルごと、リストのアイテムのインデントごとです。

.. parsed-literal::
    :class: program

    = タイトル =
    この文章はhogehoge
    タイトルと一緒にフォールディングされます。

    == サブタイトル1 ==
    本文本文本文本文本文本文
    本文本文本文本文本文本文
    本文本文本文本文本文本文
    サブタイトル1、サブタイトル2は同じ深さです。

    == サブタイトル2 ==
    ほんぶんほんぶんほんぶん
    ほんぶんほんぶんほんぶん

    === サブサブタイトル ===
    このリストの階層ごとにもフォールディングされます。

        \* リスト 1
            \* リスト 2
            \* リスト 3
                \* リスト 4
                \* リスト 5
            \* リスト 6
            \* リスト 7
        \* リスト 8



================================================================================
テキストオブジェクト
================================================================================

見出しから、次の見出しまでの領域を操作するテキストオブジェクト「ah」「ih」が用意されています。 |BR|
次の図はそのテキストオブジェクトの操作範囲を示したものです。

.. raw:: html

    <pre class="program literal-block">
    <span class="code_high">== テキストオブジェクト「ah」 ==</span>
    <span class="code_high">見出しから、次の見出しまでの領域を操作する</span>
    <span class="code_high">テキストオブジェクト「ah」「ih」が用意されています。</span>
    <span class="code_high"> </span>
    <span class="code_high">次の図はそのテキストオブジェクトの操作範囲を示したものです。</span>
    <span class="code_high"> </span>
    <span class="code_high"> </span>
    == マッピングの変更 ==
    上で紹介したVimwiki操作のマッピングはデフォルトで設定されているものです。
    </pre>

「ah」と「ih」の違いは、最後に空行がある時に、それを操作対象とするかないかの違いです。

.. raw:: html

    <pre class="program literal-block">
    <span class="code_high">== テキストオブジェクト「ih」 ==</span>
    <span class="code_high">見出しから、次の見出しまでの領域を操作する</span>
    <span class="code_high">テキストオブジェクト「ah」「ih」が用意されています。</span>
    <span class="code_high"> </span>
    <span class="code_high">次の図はそのテキストオブジェクトの操作範囲を示したものです。</span>
     
     
    == マッピングの変更 ==
    上で紹介したVimwiki操作のマッピングはデフォルトで設定されているものです。
    </pre>

内容ごとに見出しを付けてあるのであれば、有用なテキストオブジェクトとなります。

.. parsed-literal::
    :class: console

    " 操作例
    " 見出しと、その内容をビジュアルモードで選択する
    vah
    
    " 見出しと、その内容を削除する。
    dah
    
    " 見出しと、その内容をヤンクする。
    yah



================================================================================
WikiページのHTML化
================================================================================

「:VimwikiAll2HTML」コマンドを実行すると、WikiページをHTML化できます。
HTML化したファイルは、デフォルトでは「$HOME/vimwiki_html/」ディレクトリ以下に出力されます。

.. parsed-literal::
    :class: console

    :VimwikiAll2HTML

.. csv-table::
    :header: 操作, 操作対象, 説明

    ":Vimwiki2HTML",    開いているWikiページ, カレントのWikiページからHTML形式のファイルを生成します。
    ":VimwikiAll2HTML", 全Wikiページ,         全Wikiページ分のHTML形式のファイルを生成します。



================================================================================
マッピングの変更
================================================================================

上で紹介したVimwiki操作のマッピングはデフォルトで設定されているものです。 |BR|
これを別のマッピングに変更する場合は、ヘルプ「vimwiki-mappings」を参考に設定を変更してみてください。

.. parsed-literal::
    :class: console

    " Vimwikiのマッピングに関するヘルプを開く
    :help vimwiki-mappings

また、マッピングの設定については、 |BR|
`Vimwiki : Vimベースの個人用Wiki環境 #4 設定・カスタマイズ`_ |BR|
のページでも少しだけ扱っています。



================================================================================
ページリンク
================================================================================

#. `Vimwiki : Vimベースの個人用Wiki環境 #1 インストールから基本的な使い方まで`_
#. - `Vimwiki : Vimベースの個人用Wiki環境 #2 Vimwikiの操作`_
#. `Vimwiki : Vimベースの個人用Wiki環境 #3 Wikiページ記法`_
#. `Vimwiki : Vimベースの個人用Wiki環境 #4 設定・カスタマイズ`_

.. _`Vimwiki : Vimベースの個人用Wiki環境 #1 インストールから基本的な使い方まで`: `doc_vimwiki`_
.. _`Vimwiki : Vimベースの個人用Wiki環境 #2 Vimwikiの操作`: `doc_vimwiki_usage`_
.. _`Vimwiki : Vimベースの個人用Wiki環境 #3 Wikiページ記法`: `doc_vimwiki_syntax`_
.. _`Vimwiki : Vimベースの個人用Wiki環境 #4 設定・カスタマイズ`: `doc_vimwiki_config`_

.. _`Vimwiki`: http://www.vim.org/scripts/script.php?script_id=2226
.. _`doc_vimwiki`: /articles/vim/vimwiki/vimwiki_vim.html
.. _`doc_vimwiki_usage`: /articles/vim/vimwiki/vimwiki_vim_usage.html
.. _`doc_vimwiki_syntax`: /articles/vim/vimwiki/vimwiki_vim_syntax.html
.. _`doc_vimwiki_config`: /articles/vim/vimwiki/vimwiki_vim_config.html



