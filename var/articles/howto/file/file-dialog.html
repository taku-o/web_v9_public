.. vim:set expandtab ff=unix ft=rest :

..  ファイル選択ダイアログを使ってファイルを開く、書き込む。

..  ある種のファイル、例えば、
    「深いディレクトリ下にあるファイル」、
    「日本語名のディレクトリにあるファイル、日本語名のファイル」、
    「Windowsのデスクトップにあるファイル」などは、
    vimエディタのコマンドで指定するよりも、
    GUIのファイル選択ダイアログで指定した方が楽になることがあります。
    この記事では、vimエディタのファイル選択ダイアログの呼び出し方について説明します。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen| unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

ある種のファイル、例えば、
「深いディレクトリ下にあるファイル」、 |BR|
「日本語名のディレクトリにあるファイル、日本語名のファイル」、
「Windowsのデスクトップにあるファイル」などは、 |BR|
vimエディタのコマンドで指定するよりも、
GUIのファイル選択ダイアログで指定した方が楽になることがあります。 |BR|
この記事では、vimエディタのファイル選択ダイアログの呼び出し方について説明します。

.. image:: /dist/img/howto/file/file-dialog.jpg
    :alt:  ファイル選択ダイアログ



================================================================================
ファイル選択ダイアログを開く
================================================================================

コマンドの書式
--------------------------------------------------------------------------------

vimエディタのファイル選択ダイアログは「browse」コマンドで呼び出せます。 |BR|
「browse」コマンドの書式は次のようになっています。

.. parsed-literal::
    :class: console

    :browse {選択したファイルに実行したい操作}

「browse」コマンドの引数には、 |BR|
「e」「w」など、ファイル選択ダイアログで選択したファイルに対して |BR|
実行したい処理を指定します。

.. note::

    「browse」コマンドは「bro」と省略しても実行できます。 |BR|
    これを知っていると、コマンドがかなり短くなります。

    .. parsed-literal::
        :class: console

        **" 選択したファイルを開く**
        :bro e


コマンドの例
--------------------------------------------------------------------------------

次に紹介する2つのコマンドを覚えておきましょう。 |BR|
この2つのコマンドだけでも、かなり役立ちます。

.. parsed-literal::
    :class: console

    **" ダイアログで選択したファイルを開く**
    :browse e

.. parsed-literal::
    :class: console

    **" ダイアログで指定したファイルに書き込む**
    :browse w

.. note::

    「browse」コマンドの引数には、「e」「w」の他に、 |BR|
    「r」「saveas」「sp」「mkexrc」「mkvimrc」「mksession」「split」「vsplit」「tabe」を |BR|
    指定できます。



================================================================================
ファイル選択ダイアログの初期ディレクトリ
================================================================================

ファイル選択ダイアログの初期ディレクトリは、
「browsedir」の設定で管理されています。 |BR|
ダイアログの初期ディレクトリとして選択できるのは次の4パターンです。

- `vimエディタで開いているファイルと同じディレクトリ`_
- `最後にファイル選択ダイアログで開いたディレクトリ`_
- `カレントディレクトリ`_
- `ディレクトリを指定`_


vimエディタで開いているファイルと同じディレクトリ
--------------------------------------------------------------------------------

今開いているファイルと同じディレクトリを初期ディレクトリとして、 |BR|
ファイル選択ダイアログを開きたい場合には、 |BR|
vimエディタの設定ファイルで次のように設定してください。 |BR|
私の経験上、最もお勧めできる設定です。

.. parsed-literal::
    :class: program

    :set browsedir=buffer


最後にファイル選択ダイアログで開いたディレクトリ
--------------------------------------------------------------------------------

最後にファイル選択ダイアログで開いたファイルのディレクトリを初期ディレクトリとする場合は、 |BR|
vimエディタの設定ファイルで次のように指定してください。 |BR|
この設定は、連続で同じディレクトリのファイルを編集することが多い場合に便利です。

.. parsed-literal::
    :class: program

    :set browsedir=last


カレントディレクトリ
--------------------------------------------------------------------------------

カレントディレクトリを指定してファイル選択ダイアログを開く場合は、 |BR|
vimエディタの設定ファイルで次のように指定します。

.. parsed-literal::
    :class: program

    :set browsedir=current

.. note::

    この設定は、環境によっては、「.」で代用できます。

    .. parsed-literal::
        :class: console

        **" コマンドの例**
        :bro e .


ディレクトリを指定
--------------------------------------------------------------------------------

指定したディレクトリを基準にファイル選択ダイアログを開くようにするには、 |BR|
vimエディタの設定ファイルで次のように指定します。 |BR|
この設定は作業用ディレクトリが決まっている人には便利かもしれません。 |BR|
vimエディタのセッション機能と組み合わせる手もあります。

.. parsed-literal::
    :class: program

    **" PATHを直接指定。設定例。**
    :set browsedir=/opt/var
    :set browsedir=c:/cygwin/etc

.. note::

    vimエディタのセッション機能は、その時点のウィンドウ、設定の状態などを
    セッションファイルに保存する機能です。 |BR|
    保存されたセッションファイルをロードすると、
    セッションファイルを作成した時点の状況を容易に再現できます。 |BR|
    （もちろん、「browsedir」の設定も）
    
    セッション機能の詳細については、vimエディタのヘルプを参照してください。

    .. parsed-literal::
        :class: program

        :help session



