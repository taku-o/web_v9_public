.. vim:set expandtab ff=unix ft=rest :

..  ファイルのエンコーディング、改行コードを変更して、ファイルを保存する。

..  vimエディタで、ファイルのエンコーディング、改行コードを変更して保存する方法を説明します。
    この機能は、他の一般エディタの「保存時の文字コード、改行コード指定」の機能にあたります。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen| unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

vimエディタでファイルのエンコーディング、改行コードを変更して保存する方法を説明します。 |BR|
この機能は、他の一般エディタの「保存時に文字コード、改行コードを指定する機能」にあたります。



================================================================================
ファイルの文字コードを変更して保存する
================================================================================

vimエディタでファイルの文字コードを変更するには、 |BR|
「:set fenc={文字コード}」というコマンドを実行します。

.. parsed-literal::
    :class: console

    **" ファイルの文字コードを変更する**
    :set fenc={文字コード}
    
    **" 文字コードeuc-jpを指定。**
    :set fenc=euc-jp
    **" 文字コードshift_jisを指定。**
    :set fenc=shift_jis
    **" 文字コードutf-8を指定。**
    :set fenc=utf-8

文字コードを変更した直後はファイル保存前の状態なので、 |BR|
文字コードを変更して保存するには、次のように2つのコマンドを実行することになります。

.. parsed-literal::
    :class: console

    **" ファイルの文字コードを変更して、ファイルを保存。**
    :set fenc=utf-8
    :w



================================================================================
ファイルの改行コードを変更して保存する
================================================================================

vimエディタでファイルの改行コードを変更するには、 |BR|
「:set ff={ファイルのフォーマット}」というコマンドを実行します。

.. parsed-literal::
    :class: console

    **" ファイルの改行コードを変更する**
    :set ff={ファイルのフォーマット}
    
    **" Windowsの形式を指定。**
    :set ff=dos
    **" Macの形式を指定。**
    :set ff=mac
    **" Unixの形式を指定。**
    :set ff=unix

やはり、改行コードを変更した直後はファイル保存前の状態なので、 |BR|
改行コードを変更してファイルを保存するには、次のようにコマンドを実行します。

.. parsed-literal::
    :class: console

    **" ファイルの改行コードを変更して、ファイルを保存。**
    :set ff=unix
    :w



================================================================================
変換処理をかける時に、注意するべきこと
================================================================================

ファイルの文字コードを変更して保存する場合、改行コードを変更してファイルを保存する場合、
どちらの場合でも注意しなければならないことがあります。 |BR|
それは、vimエディタがファイルのエンコーディングや改行を正しく解釈できていない状態では、
ファイルの文字コード、改行コードを変換してはいけない、ということです。 |BR|
例えば、下（↓）のような文字化けしている状態で文字コード変換処理を行うと、ひどい目にあいます。

.. image:: /dist/img/howto/file/pp_enc_euc.jpg
    :alt:  文字化けしたファイル

このような場合、ファイルの文字コード、改行コードを変換する前に、
`ファイルを正しい状態で開いてから`__ 、変換処理を行う必要があります。 |BR|
`ファイルの文字コード、フォーマットを指定してのファイルの読み直し方`__ については、
記事を書いているので、そちらも参考にしてみてください。

__ /articles/howto/file/open-with-format.html
__ /articles/howto/file/open-with-format.html

.. note::

    つまり、次のような手順となります。

    - 正しい状態でファイルを開く。
    - ファイルの文字コード、改行コードの変換処理を行う。
    - ファイルを保存する。




