.. vim:set expandtab ff=unix ft=rest :

..  PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール (Mac OSX Tiger、vim7)

..  vimエディタ バージョン7 の Mac OSX 1.4 Tiger へのインストール方法を扱った記事です。
    あまりパソコンに強くない人でもわかるようにかなり丁寧に方法を書いています。
    (Mac)

.. |BR| raw:: html

    <br />

.. |yen| unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

vimエディタ バージョン7 の Mac OSX 1.4 Tiger へのインストール方法を扱った記事です。 |BR|
あまりパソコンに強くない人でもわかるようにかなり丁寧に方法を書いています。



================================================================================
アプリケーションの入手
================================================================================

ダウンロード
--------------------------------------------------------------------------------

Mac OSX Tiger用のvimエディタ バージョン7は、 |BR|
SourceForge.jpで配布されているvimエディタを使用するのが、現時点では最も良いと思います。 |BR|
こちらのフォーラムではGUI用のvimエディタと、
ターミナルでvimエディタを起動できるスクリプトを配布しています。 |BR|
http://sourceforge.jp/forum/forum.php?forum_id=12542

まず、下記のURLに行き、手元のマシンにアプリケーションをダウンロードしてください。 |BR|
ダウンロードするのはもちろん、インストールに手間のかからない気軽に試せる「バイナリ」の方です。

.. image:: /dist/img/howto/vim7_install_to_tiger/sourceforge_jp.jpg
    :alt:  http://sourceforge.jp/forum/forum.php?forum_id=12542

複数のバージョンが見つかるでしょうが、 |BR|
基本的には最も数字の大きいもの（最新のもの）を選ぶと良いはずです。


ディスクイメージファイルのマウント
--------------------------------------------------------------------------------

アプリケーションは、ディスクイメージファイル（dmgファイル）という形式のファイルで
配布されています。 |BR|
ハイパーリンクを選択すると、ディスクイメージファイル（dmgファイル）がダウンロードされます。

.. image:: /dist/img/howto/vim7_install_to_tiger/dmg_file.jpg
    :alt:  ディスクイメージファイル

このディスクイメージファイル（dmgファイル）をダブルクリックすると、 |BR|
ディスクイメージファイル（dmgファイル）の展開が開始され、

.. image:: /dist/img/howto/vim7_install_to_tiger/dmg_expand.jpg
    :alt:  ディスクイメージファイルの展開

展開完了後、ディスクイメージがマウントされます。 |BR|
マウントすると、そのディスクイメージに格納されているファイルに
アクセスできるようになります。

.. image:: /dist/img/howto/vim7_install_to_tiger/dmg_mount.jpg
    :alt:  ディスクイメージファイルへのマウント



================================================================================
GUI版vimエディタのインストール
================================================================================

アプリケーションのコピー
--------------------------------------------------------------------------------

GUI用のvimエディタをインストールします。 |BR|
vimアイコンを「アプリケーション」ディレクトリにコピーしてください。

.. image:: /dist/img/howto/vim7_install_to_tiger/dmg_mount_cp_to_app_dir.jpg
    :alt:  vimアイコンを「アプリケーション」ディレクトリにコピー


設定ファイルの決まりごと
--------------------------------------------------------------------------------

vimエディタで使用する設定ファイルをコピーする必要があります。 |BR|
コピーすべき設定ファイルはアプリケーションと一緒に配布されているので、これを使用します。 |BR|
vimエディタでは、個人用の設定ファイルは「ホーム」ディレクトリに置く決まりになっています。 |BR|
（「ホーム」ディレクトリとは、Finderで、下のアイコンを選択すると表示されるディレクトリ）

.. image:: /dist/img/howto/vim7_install_to_tiger/home_dir_icon.jpg
    :alt:  「ホーム」ディレクトリアイコン


設定ファイルのコピー
--------------------------------------------------------------------------------

Mac OSXでは、vimエディタの設定ファイルに次のファイル名が使用できます。

- .vimrc
- _vimrc
- .gvimrc
- _gvimrc

通常、Mac OSXを含む、Unix系のOSでは「.（ドット）」で始まるファイル名を使用しますが、 |BR|
パソコンに不慣れな人は配布されている「_vimrc」「_gvimrc」というファイル名のまま、
「ホーム」ディレクトリにコピーする方が安全確実です。 |BR|
「_vimrc」「_gvimrc」を「ホーム」ディレクトリにコピーしてください。

.. image:: /dist/img/howto/vim7_install_to_tiger/dmg_mount_cp_to_home_dir.jpg
    :alt:  「_vimrc」「_gvimrc」を「ホーム」ディレクトリにコピー


Dockへの登録
--------------------------------------------------------------------------------

Dockにvimエディタを登録しておくと、Dock上のvimエディタアイコンをタッチするだけで、 |BR|
vimエディタを起動できるようになるので便利かもしれません。

.. image:: /dist/img/howto/vim7_install_to_tiger/run_gvim_from_dock.jpg
    :alt:  Dockからvimエディタを起動

Dockに登録するには、先ほど「アプリケーション」ディレクトリに入れたvimエディタを |BR|
Dockの上までドラッグアンドドロップします。

.. image:: /dist/img/howto/vim7_install_to_tiger/vim_to_dock.jpg
    :alt:  vimエディタをDockに登録

.. note::

    マウントしているディスクイメージの方のvimエディタアイコンをDockに登録しないように
    気をつけてください。


GUI版vimエディタ動作確認
--------------------------------------------------------------------------------

vimエディタを起動してください。 vimエディタを起動するには、

- （Dockに登録しているなら）Dockの「vimアイコン」を選択するか、
- 「アプリケーション」ディレクトリにある「vimアイコン」を選択します。

.. image:: /dist/img/howto/vim7_install_to_tiger/run_gvim_from_dock_or_app_dir.jpg
    :alt:  vimエディタを起動

vimエディタは起動できましたか？ |BR|
vimエディタが起動したのを確認したら、メニューから「終了」を選んで
アプリケーションを一度終了させましょう。

.. image:: /dist/img/howto/vim7_install_to_tiger/close_gvim_app.jpg
    :alt:  アプリケーションの終了



================================================================================
ちょっとした問題
================================================================================

どんな問題が発生するのか
--------------------------------------------------------------------------------

Mac OSX Tigerには、最初からターミナル版vimエディタの「バージョン6」が
インストールされています。

今回、vimエディタの「バージョン7用の設定ファイル」を
「ホーム」ディレクトリにコピーしました。 |BR|
そのため、「バージョン6」のvimエディタを起動した時にも
「バージョン7用の設定ファイル」が読み込まれてしまいます。 |BR|
結果、バージョン6のターミナル版vimエディタ起動時に、
次のようなメッセージが表示されるようになります。 |BR|
いくつかの設定ファイルのオプションを、
バージョン6のターミナル版vimエディタが理解できなかったからです。

.. parsed-literal::
    :class: console

    Error detected while processing /Users/user/_vimrc:
    line   39:
    E518: Unknown option: autochdir
    line   41:
    E518: Unknown option: migemo
    Hit ENTER or type command to continue

.. image:: /dist/img/howto/vim7_install_to_tiger/err_with_console_vim.jpg
    :alt:  ターミナル版vimで表示されるメッセージ


この問題を解決する方法について
--------------------------------------------------------------------------------

この問題を解決する方法はいくつかありますが、

- 表示されるメッセージを気にしない。
- オプションを解釈できるバージョンのvimエディタをコンパイルしてインストールする。
- PATHの設定を変えて、バージョン7のvimエディタが代わりに起動するようにする。
- aliasを使用して、バージョン7のvimエディタが代わりに起動するようにする。
- バージョン7のvimエディタ起動時だけ、設定ファイルを読み込むようにする。

私は、この中で最も簡単で良い方法は最後の方法であると、考えました。

- ターミナルのviエディタの挙動が変わってしまわない。
- 3番目、4番目の方法はvimを呼び出しているコマンドが結構あるので、意外と面倒。
- 環境をあまり弄らなくて良い。
- 何より簡単。


解決編
--------------------------------------------------------------------------------

では、実際に最後の方法で問題を解決してみます。 |BR|
vimエディタの設定ファイルで、ある条件の時は設定ファイルを読み込まないように指定します。 |BR|
判定の条件は、
「Mac OSXデフォルトのvimで今後も使われることはないと思われるmigemoオプションの有り無し」
としたいと思います。

「ホーム」ディレクトリにコピーしたvimエディタの設定ファイル「_vimrc」の先頭に、
次の3行のコードを加えてください。 |BR|
このコードはテキストエディタを使用して書きます。 |BR|
（テキストエディタがわからない場合は、わかるまで放置した方が良さそうです。）

.. parsed-literal::
    :class: program

    :if ! has("migemo")
        :finish
    :endif

これでMac OSXデフォルトのvimを起動しても、エラーメッセージは表示されなくなります。


.. note::

    migemoオプションを条件とするのではなく、 |BR|
    起動したvimエディタのバージョンを条件とする場合は、
    次のようなコードを書きます。

    .. parsed-literal::
        :class: program

        **" バージョン7.1より小さいバージョンなら、ここで設定ファイル読み込み停止**
        :if version < 701
            :finish
        :endif



================================================================================
マウントしていたディスクイメージを取り除く
================================================================================

ここまでの作業が完了したら、ディスクイメージのマウントを解除します。 |BR|
ディスクイメージ横の解除ボタンを押して、マウントを解除してください。

.. image:: /dist/img/howto/vim7_install_to_tiger/remove_dmg_mount.jpg
    :alt:  ディスクイメージのマウントを解除



================================================================================
インストール後、エディタを使いこなすまで
================================================================================

さて、これでvimエディタがインストールされ使えるようになりましたが、 |BR|
ある程度自由自在に使えるようになるまでには、少し時間がかかります。

vimエディタに添付している `vimエディタの操作チュートリアル`__ や、 |BR|
世間に多数あるvimエディタのサイトを見て、練習してみてください。

__ /articles/howto/tutorial.html



================================================================================
注意事項など
================================================================================

GUI版vimエディタと一緒に配布されている、
ターミナルからvimエディタを呼び出せる実行ファイルの設定については、 |BR|
難易度が高いのと、記事が長くなったのとで、 `別のページを用意しました。`__ |BR|
（こちらの記事はターミナルでvim7を使用しないなら読まなくても問題はありません。）

__ /articles/howto/install/vim7_install_to_tiger_2.html



================================================================================
ページリンク
================================================================================

#. - `PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール (Mac OSX Tiger、vim7)`__
#. `PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール 続き (Mac OSX Tiger、vim7)`__

__ /articles/howto/install/vim7_install_to_tiger.html
__ /articles/howto/install/vim7_install_to_tiger_2.html



