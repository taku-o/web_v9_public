.. vim:set expandtab ff=unix ft=rest :

..  PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール 続き (Mac OSX Tiger、vim7)

..  タイトルに偽りありで、かなり難解な記事となってしまいました。
    この記事は
    「PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール (Mac OSX Tiger、vim7)」の
    続きとなる記事で、
    前回の記事では説明しなかったターミナル用vimエディタの
    実行ファイルのインストールについて説明します。
    (Mac)

.. |BR| raw:: html

    <br />

.. |yen| unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

この記事は
`「PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール (Mac OSX Tiger、vim7)」`__
の続きとなる記事で、 |BR|
`前回の記事`__ では説明しなかったターミナル用vimエディタの
実行ファイルのインストールについて説明します。

__ /articles/howto/install/vim7_install_to_tiger.html
__ /articles/howto/install/vim7_install_to_tiger.html

タイトルに偽りありで、かなり難解な記事となってしまいました。 |BR|
Unix系OSの知識がある程度あり、
viエディタの操作方法がわかることを前提で記事を書いているので、 |BR|
後の記事を読んで難しいと感じたら、インストールしない方が良いでしょう。



================================================================================
まず、はじめに
================================================================================

ターミナル用vimエディタの実行用スクリプトとは
--------------------------------------------------------------------------------

前回インストールした `バージョン7のvimエディタ`__ に同梱されているスクリプトで、 |BR|
このスクリプトをターミナルで実行すると、バージョン7のvimエディタをターミナル上で起動できます。

仕組みとしては、前回インストールしたバージョン7のvimエディタを
スクリプトから呼び出す形になっているので、 |BR|
`前回の記事`__ を読んで、GUI版vimエディタのインストールは先に済ませておいてください。

__ /articles/howto/install/vim7_install_to_tiger.html
__ http://sourceforge.jp/forum/forum.php?forum_id=12542

.. image:: /dist/img/howto/vim7_install_to_tiger/edit_vim_with_jp.jpg


どのようにインストールするか
--------------------------------------------------------------------------------

次の手順でインストールします。

- 実行ファイルを「/usr/local/bin」にコピー
- 「/usr/local/bin」にPATHを通す
- ターミナルの設定を変更
- 「.inputrc」設定ファイルを編集



================================================================================
インストール
================================================================================

ディスクイメージファイルをマウントする
--------------------------------------------------------------------------------

`前回の記事`__ を参考に、
`「バイナリ」のvimエディタのディスクイメージファイル`__ をマウントしてください。 |BR|
「vim」という名前のファイルが、今回、インストールする実行ファイルファイルです。 |BR|
マウントしたディスクイメージには、ターミナルから「/Volumes/vim7」のPATHでアクセスできます。

__ /articles/howto/install/vim7_install_to_tiger.html
__ http://sourceforge.jp/forum/forum.php?forum_id=12542

.. image:: /dist/img/howto/vim7_install_to_tiger/vim_in_dmg_mount.jpg
    :alt:  ディスクイメージファイル無いにある「vim」実行ファイル


実行ファイルを「/usr/local/bin」にコピーする
--------------------------------------------------------------------------------

- 「/usr/local/bin」ディレクトリがなければ作成
- 「/usr/local/bin」に「vim」実行ファイルをコピー
- 「/usr/local/bin/vim」に実行権限がなければ付与

と、作業を進めていきます。

ターミナルを起動し、次のコマンドを入力してください。 |BR|
「sudo」コマンドは、最初に実行した時にパスワードを求められますが、 |BR|
現在ログイン中のユーザーのパスワードを入力すれば大丈夫です。

.. parsed-literal::
    :class: console

    sudo mkdir -p /usr/local/bin
    sudo cp /Volumes/vim7/vim /usr/local/bin
    sudo chmod +x /usr/local/bin/vim

.. note::

    ターミナルアプリケーションは、
    Finderで「アプリケーション → ユーティリティ」と
    移動した先にあります。

    .. image:: /dist/img/howto/vim7_install_to_tiger/run_terminal_app.jpg
        :alt:  ターミナルアプリケーションの起動

.. note::

    そのアカウントに「ユーザにこのコンピュータの管理を許可」のチェックがないと、
    「sudo」コマンドを実行できません。 |BR|
    「sudo」コマンドが失敗するときは「システム環境設定」を確認してください。

    .. image:: /dist/img/howto/vim7_install_to_tiger/account_pref.jpg
        :alt:  「ユーザにこのコンピュータの管理を許可」のチェックを入れる


「/usr/local/bin」にPATHを通す
--------------------------------------------------------------------------------

「/usr/local/bin」にPATHを通して、
先ほどインストールした「/usr/local/bin/vim」コマンドを検索できるようにします。 |BR|
シェルの設定ファイルを変更して、PATHを通してください。

デフォルトシェルのbashの場合は、
「${HOME}/.bashrc」設定ファイルを作成し、次の設定を記述することになります。

.. parsed-literal::
    :class: program

    export PATH="/usr/local/bin:${PATH}"

.. note::

    Mac OSXのシェルは実行するコマンドを探す際、
    「PATH」という名前の環境変数で指定したディレクトリを
    順々に探しに行きます。 |BR|
    各PATHは「:」で区切って指定します。


PATHの設定確認
--------------------------------------------------------------------------------

PATHが正しく通っているかのチェックを行います。 |BR|
ターミナルを新しく立ち上げなおしてから、次のコマンドを入力してください。

.. parsed-literal::
    :class: console

    which vim

次のメッセージが表示されたら、PATHが正しく設定されています。

.. parsed-literal::
    :class: console

    /usr/local/bin/vim

.. note::

    PATHが正しく設定できていないなら、次の章をチェックしてください。

    - `実行ファイルを「/usr/local/bin」にコピーする`_
    - `「/usr/local/bin」にPATHを通す`_


ターミナルの設定を変更する
--------------------------------------------------------------------------------

ターミナルの設定を変更します。 |BR|
「ターミナル」のメニューから「ウィンドウの設定」を選択し、
次のように設定を変更します。

- 「非ASCII文字をエスケープする」のチェックを外す
- 「日本語や中国語などにワイドグリフを使用する」のチェックを入れる
- 「ワイドグリフは2桁とカウントする」のチェックを入れる
- 「文字セットエンコーディング」を「Unicode（UTF-8）」にセット

.. image:: /dist/img/howto/vim7_install_to_tiger/terminal_menu.jpg
    :alt:  「ターミナル」のメニューから「ウィンドウの設定」を選択

↓ （ターミナルを起動したら、エミュレーションの設定の確認）

.. image:: /dist/img/howto/vim7_install_to_tiger/terminal_not_ascii_escape.jpg
    :alt:  エミュレーションの設定の確認

↓ （ディスプレイの設定の確認）

.. image:: /dist/img/howto/vim7_install_to_tiger/terminal_encoding.jpg
    :alt:  ディスプレイの設定の確認


「.inputrc」設定ファイルを編集する
--------------------------------------------------------------------------------

「${HOME}/.inputrc」設定ファイルを作成し、
次の設定を付け加えてください。

.. parsed-literal::
    :class: program

    set covert-meta off
    set meta-flag on
    set output-meta on

.. image:: /dist/img/howto/vim7_install_to_tiger/edit_inputrc.jpg
    :alt:  「.inputrc」設定ファイルを作成


動作確認
--------------------------------------------------------------------------------

ターミナルから「vim」コマンドを実行し、vimエディタを起動します。 |BR|
vimエディタを起動したら、次の2点のチェックを行ってください。 |BR|

- vimエディタのバージョンは正しいか
- 日本語の入力はできるか

.. image:: /dist/img/howto/vim7_install_to_tiger/command_vim.jpg
    :alt:  ターミナルのvimエディタを起動

↓ （vimエディタのバージョンのチェック）

.. image:: /dist/img/howto/vim7_install_to_tiger/check_vim_version.jpg
    :alt:  vimエディタのバージョンをチェック

↓ （日本語の入力のチェック）

.. image:: /dist/img/howto/vim7_install_to_tiger/edit_vim_with_jp.jpg
    :alt:  vimエディタで日本語が入力できるかのチェック

.. note::

    起動したvimエディタのバージョンが正しくない場合は、次の章をチェックしてください。

    - `実行ファイルを「/usr/local/bin」にコピーする`_
    - `「/usr/local/bin」にPATHを通す`_

    日本語の入力ができていない場合は、次の章をチェックしてください。

    - `ターミナルの設定を変更する`_
    - `「.inputrc」設定ファイルを編集する`_


ディスクイメージファイルのマウントを解除する
--------------------------------------------------------------------------------

ディスクイメージのマウントを解除します。 |BR|
ディスクイメージ横の解除ボタンを押して、マウントを解除してください。

.. image:: /dist/img/howto/vim7_install_to_tiger/remove_dmg_mount.jpg
    :alt:  ディスクイメージのマウントを解除



================================================================================
注意事項など
================================================================================

この記事では説明を簡易にするため、どのように設定するか指定しています。 |BR|
Unix系OSに詳しい人は設定手順、設定方法を、自分の都合の良いように変更してください。



================================================================================
ページリンク
================================================================================

#. `PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール (Mac OSX Tiger、vim7)`__
#. - `PCに昨日初めてさわった人でもできるくらい超々簡単vimインストール 続き (Mac OSX Tiger、vim7)`__

__ /articles/howto/install/vim7_install_to_tiger.html
__ /articles/howto/install/vim7_install_to_tiger_2.html



