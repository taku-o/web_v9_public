.. vim:set expandtab ff=unix ft=rest :

..  最後に保存してから、どのくらい編集したのかの差分を表示

..  「DiffOrig」コマンドは編集中のバッファとファイルシステム上のファイルとで、
    どの部分が変更されたのかを比較、表示するコマンドです。
    このコマンドを使用すると、ファイルを開いてから、あるいは最後にファイルを保存してから、
    どれくらいの作業を行ったかの確認ができます。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen|    unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

:raw-html:`<kbd>:DiffOrig</kbd>` コマンドは編集中のバッファとファイルシステム上のファイルとで、 |BR|
どの部分が変更されたのかを比較、表示するコマンドです。 |BR|
このコマンドを使用すると、ファイルを開いてから、あるいは最後にファイルを保存してから、 |BR|
どれくらいの作業を行ったかの確認ができます。

.. image:: /dist/img/howto/diff/diff-original-file.jpg
    :alt:  「DiffOrig」コマンドの結果表示

.. note::

    この :raw-html:`<kbd>:DiffOrig</kbd>` コマンドは「$VIMRUNTIME/vimrc_example.vim」で
    最近定義されたコマンドです。 |BR|
    もし、 :raw-html:`<kbd>:DiffOrig</kbd>` コマンドが動作しないようなら、
    次の可能性を検証してみてください。

    - vimエディタのバージョンが足りていない
    - 「$VIMRUNTIME/vimrc_example.vim」を読み込んでいない

    :raw-html:`<kbd>:DiffOrig</kbd>` コマンドは「$VIMRUNTIME/vimrc_example.vim」で
    次のように定義されているので、 |BR|
    この定義をvimエディタの設定ファイルに追加すれば、
    上の状況下でも :raw-html:`<kbd>:DiffOrig</kbd>` コマンドが使用できるようになるかもしれません。

    .. parsed-literal::
        :class: program

        command DiffOrig vert new | set bt=nofile | r # | 0d\_ | diffthis | wincmd p | diffthis



================================================================================
「DiffOrig」コマンドの使い方
================================================================================

コマンドの実行
-------------------------------------------------------------------------------

vimエディタでファイルを編集したら、 |BR|
そのファイルを保存する前に、ノーマルモードで次のコマンドを実行してください。 |BR|
このコマンドは引数を取らないので :raw-html:`<kbd>:DiffOrig</kbd>` とだけ入力すれば実行できます。

.. parsed-literal::
    :class: console

    :DiffOrig

.. image:: /dist/img/howto/diff/diff-original-file.jpg
    :alt:  「DiffOrig」コマンドの結果表示


コマンドの結果の見方
-------------------------------------------------------------------------------

[Scratch]と表示されている方のバッファがファイルシステム上のファイル、 |BR|
そうでない方（ファイル名の表示されている方）が編集中のファイルです。

.. image:: /dist/img/howto/diff/diff-original-file_scratch.jpg
    :alt:  「DiffOrig」コマンドの結果、「Scratch」の拡大表示


================================================================================
注意事項など
================================================================================

その他の操作は、通常のvimエディタ上での操作と変わりません。



