.. vim:set expandtab ff=unix ft=rest :

..  2つのテキストファイルの差分をマージする

..  vimエディタで2つのファイルの差分を表示した後、その差分をマージする方法を紹介します。
    コピーアンドペーストでもマージ作業はできますが、この操作は簡単なので覚えておくと役に立ちます。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen|    unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

vimエディタで2つのファイルの差分を表示した後、その差分をマージする方法を紹介します。 |BR|
コピーアンドペーストでもマージ作業はできますが、この操作は簡単なので覚えておくと役に立ちます。

.. note::

    2つのファイルの差分の表示方法については、
    記事「 `2つのファイルの差分を取る`__ 」を参照してください。

    __ /articles/howto/diff/diff_text.html



================================================================================
差分のマージの仕方
================================================================================

2つのファイルで違いのある場所の表示
-------------------------------------------------------------------------------

記事「 `2つのファイルの差分を取る`__ 」を参考に、
ファイルの差分をvimエディタで表示してください。 |BR|
差分を表示すると、2つのファイルで違いのある部分がハイライトされて表示されます。 |BR|
この状態は「diffモード」と呼ばれています。

__ /articles/howto/diff/diff_text.html

.. image:: /dist/img/howto/diff/vertical_diff.jpg
    :alt:  diffモード


差分のマージ
-------------------------------------------------------------------------------

このdiffモードの状態で、カーソルの位置に、もう一方のファイルの差分を取り込むには、 |BR|
差分ハイライトされている場所で次のコマンドを入力します。

.. parsed-literal::
    :class: console

    do

逆に、カーソルの位置の差分を、もう一方のファイルに取り込ませるには、 |BR|
ノーマルモードで次のコマンドを入力します。

.. parsed-literal::
    :class: console

    dp

.. image:: /dist/img/howto/diff/diffmode_cmd.jpg
    :alt:  diffモードでの差分マージコマンド

.. note::

    コマンド「do」は「diff obtain」、コマンド「dp」は「diff put」と覚えると良いでしょう。 |BR|
    コマンド「do」「dp」は、ファイルの差分のある場所で実行しないと、
    反応しません。


ファイル間で違いのある場所へカーソルを移動する
-------------------------------------------------------------------------------

ファイル間で違いのある場所を下方向に検索して、 |BR|
そこにカーソルを移動するには次のコマンドを入力してください。

.. parsed-literal::
    :class: console

    ]c

逆に上方向に検索するには次のコマンドを使用します。

.. parsed-literal::
    :class: console

    [c



