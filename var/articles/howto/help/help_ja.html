.. vim:set expandtab ff=unix ft=rest :

..  日本語に翻訳されたvimエディタのヘルプをインストールして使用する。

..  このページでは、
    英語で記述されているvimエディタのヘルプの代わりに、
    日本語に翻訳されたヘルプをインストールし、
    vimエディタ上で使用する方法を紹介します。
    (Windows, Mac)

.. |BR| raw:: html

    <br />

.. |yen|    unicode:: U+000A5 .. YEN SIGN

.. role:: raw-html(raw)
    :format: html

.. contents::

================================================================================
概要
================================================================================

このページでは、
英語で記述されているvimエディタのヘルプの代わりに、 |BR|
日本語に翻訳されたヘルプをインストールし、
vimエディタ上で使用する方法を紹介します。

.. image:: /dist/img/howto/help/help_ja_view.jpg
    :alt:  日本語のヘルプを検索。



================================================================================
日本語に翻訳されたヘルプをインストールする。
================================================================================

翻訳されたヘルプドキュメントを入手する。
--------------------------------------------------------------------------------

まず、日本語のヘルプドキュメントをダウンロードしてください。 |BR|
日本語のヘルプドキュメントは、現在、次のURLで配布しています。

Vim日本語ドキュメント（香り屋） |BR|
http://www.kaoriya.net/vimdoc_j/

このページの、「Vim日本語ドキュメントダウンロード(スナップショット)」のリンクから |BR|
圧縮ファイルの形式のドキュメントをダウンロードしてください。

.. image:: /dist/img/howto/help/help_ja_doc_archive.jpg
    :alt:  ヘルプの圧縮ファイル。解凍ツールに関連づけされている場合、アイコンは違うはず。


ダウンロードした圧縮ファイルを解凍する。
--------------------------------------------------------------------------------

ダウンロードした圧縮ファイルを解凍します。 |BR|
何らかの圧縮ファイル解凍ツールで解凍すると、次のように展開されるはずです。

.. parsed-literal::
    :class: program

    runtime/
      |
      +-- doc/
      |     +-- ada.jax
      |     +-- autocmd.jax
      |     +-- change.jax
      |     +-- cmdline.jax
      |     +-- debug.jax
      |     +-- ....
      |
      +-- syntax/
            +-- help_ja.vim

.. note::

    docディレクトリに含まれるファイルの拡張子「jax」の、「ja」の部分が、 |BR|
    ヘルプの言語の種類を示しています。

    .. image:: /dist/img/howto/help/help_ja_local.jpg
        :alt:  jaが言語を示している。


解凍したヘルプドキュメントをコピーする。
--------------------------------------------------------------------------------

runtime/docディレクトリの拡張子「jax」のファイル、
runtime/syntaxディレクトリの「help_ja.vim」ファイルを、 |BR|
それぞれ、ユーザの設定ファイルディレクトリのdocディレクトリ、syntaxディレクトリにコピーします。 |BR|
ディレクトリが無い場合は、ディレクトリを作成してから、そのディレクトリにコピーしてください。

.. parsed-literal::
    :class: console

    **Windowsの場合のコピー先ディレクトリ**
    $HOME
      |
      +-- vimfiles/
            |
            +-- doc/     （このディレクトリに拡張子「jax」のファイルをコピー）
            |
            +-- syntax/  （このディレクトリに「help_ja.vim」をコピー）

.. parsed-literal::
    :class: console

    **Mac OSXの場合のコピー先ディレクトリ**
    $HOME
      |
      +-- .vim/
            |
            +-- doc/     （このディレクトリに拡張子「jax」のファイルをコピー）
            |
            +-- syntax/  （このディレクトリに「help_ja.vim」をコピー）


追加したヘルプドキュメントにhelptagsコマンドを実行する。
--------------------------------------------------------------------------------

vimエディタを起動し、設定ファイルディレクトリにコピーした拡張子「jax」のファイルに、
「:helptags」コマンドを実行します。

.. parsed-literal::
    :class: console

    **" Windows環境の場合のコマンド**
    :helptags $HOME/vimfiles/doc

.. parsed-literal::
    :class: console

    **" Mac OSX環境の場合のコマンド**
    :helptags $HOME/.vim/doc



================================================================================
ヘルプの使い方
================================================================================

ここまでの設定を行うと、日本語環境のvimエディタでは、「:help」「:helpgrep」コマンド実行時に、 |BR|
インストールされた日本語のヘルプが先に検索されるようになります。 |BR|
（日本語のヘルプで見つからなかった場合は、英語のヘルプも検索します。）

.. parsed-literal::
    :class: console

    :help {調べたいこと}
    
    **" コマンドの例**
    :help strlen

.. parsed-literal::
    :class: console

    :helpgrep {調べたいこと}
    
    **" コマンドの例**
    :helpgrep strlen

参考：

- `vimエディタの「help」コマンドの使い方`__
- `vimエディタのヘルプドキュメントのgrep検索`__

__ /articles/howto/help/vim_help.html
__ /articles/howto/help/helpgrep.html



================================================================================
言語を指定して、ヘルプを検索する。
================================================================================

英語のヘルプから検索する。
--------------------------------------------------------------------------------

日本語のヘルプではなく、あえて、英語のヘルプドキュメントから検索する場合は、
検索語の後に「@en」を付けて検索します。 |BR|
「@en」は、「:help」コマンド、「:helpgrep」コマンド、どちらでも使用できます。

.. parsed-literal::
    :class: console

    **" 英語のヘルプから検索**
    :help {調べたいこと}@en
    
    **" コマンドの例**
    :help strlen\@en

.. parsed-literal::
    :class: console

    **" 英語のヘルプからgrep検索**
    :helpgrep {調べたいこと}@en
    
    **" コマンドの例**
    :helpgrep strlen\@en


日本語のヘルプから検索する。
--------------------------------------------------------------------------------

日本語のヘルプから検索する場合は、検索語に「@ja」を付けて検索します。 |BR|
（英語のヘルプドキュメントは検索対象にしません。）

.. parsed-literal::
    :class: console

    **" 日本語のヘルプから検索**
    :help {調べたいこと}@ja
    
    **" コマンドの例**
    :help strlen\@ja

.. parsed-literal::
    :class: console

    **" 日本語のヘルプからgrep検索**
    :helpgrep {調べたいこと}@ja
    
    **" コマンドの例**
    :helpgrep strlen\@ja



================================================================================
ヘルプドキュメントの検索順を変更する。（英語のヘルプを優先して検索させる）
================================================================================

日本語環境では、「日本語のヘルプ → 英語のヘルプ」の順序でヘルプの検索が行われますが、

.. parsed-literal::
    :class: console

    日本語のヘルプを検索 → 英語のヘルプを検索

この順序を逆にしたい時は、vimエディタの設定ファイルで次のように指定してください。

.. parsed-literal::
    :class: program

    **" 英語のヘルプ → 日本語のヘルプの順に検索**
    :set helplang=en,ja

逆に、「helplang」オプションのデフォルト値が変更されている場合などに、 |BR|
「日本語 → 英語」の検索順序に設定する場合は、次のようにvimエディタの設定ファイルで指定します。

.. parsed-literal::
    :class: program

    **" 日本語のヘルプ → 英語のヘルプの順に検索**
    :set helplang=ja,en

.. note::

    「helplang」に、英語「en」を指定していなくても、
    日本語のヘルプでマッチするものが見つからなかった場合には、 |BR|
    英語のヘルプも検索されます。 |BR|
    つまり、次の2つの設定はどちらも、検索結果は同じになります。

    .. parsed-literal::
        :class: program

        :set helplang=ja,en
        :set helplang=ja


================================================================================
注意事項など
================================================================================

vimエディタが使用しているエンコーディングが「utf-8」でない場合は、
「:helpgrep」コマンドで日本語文字列の検索がヒットしません。 |BR|
vimエディタが使用しているエンコーディングは次のコマンドで調べられます。

.. parsed-literal::
    :class: console

    :echo &encoding



